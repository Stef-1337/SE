<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui" xmlns:h="http://java.sun.com/jsf/html"
                template="/WEB-INF/template/default.xhtml">
    <ui:define name="metadata">
        <f:metadata>
            <f:viewParam name="channelBicycle" value="#{bicycleDetailView.channel}"/>
        </f:metadata>

    </ui:define>

    <ui:define name="content">
        <div class="card">
            <p:panel header="BikeDashboard" >
                <h:panelGrid columns="6" cellpadding="5" styleClass="mb-3">
                    <h:form id="auswahl">
                        <h:column>
                            <h:outputLabel for="selectOne" value="Fahrrad 1: "/>
                            <h:selectOneMenu id="selectOne" value="#{bicycleDetailView.channel}" required="true"
                                             label="Text 3" var="c">
                                <f:selectItems value="#{bicycleDetailView.getBicycles()}"
                                               var="b"
                                               itemValue="#{b.channel}"
                                               itemLabel="#{b.channel}"
                                               itemDescription="#{b.channel}"
                                               itemDisabled="#{b.channel}"
                                               itemLabelEscaped="true"
                                               noSelectionValue="#{bicycleDetailView.getBicycles()[0]}"/>
                                <f:ajax execute="auswahl" render="chart"/>
                            </h:selectOneMenu>
                        </h:column>

                        <h:column>
                            <h:outputLabel for="selectTwo" value="Fahrrad 2: "/>
                            <h:selectOneMenu id="selectTwo" value="#{bicycleDetailView.channel2}" required="true"
                                             label="Text 3" var="c">
                                <f:selectItem itemLabel="Select One" itemValue="" noSelectionOption="true"/>
                                <f:selectItems value="#{bicycleDetailView.getBicycles()}"
                                               var="b"
                                               itemValue="#{b.channel}"
                                               itemLabel="#{b.channel}"
                                               itemDescription="#{b.channel}"
                                               itemDisabled="#{b.channel}"
                                               itemLabelEscaped="true"
                                               noSelectionValue=""/>
                                <f:ajax execute="auswahl" render="chart"/>
                            </h:selectOneMenu>

                        </h:column>
                    </h:form>


                    <!--                        <h:column>-->
                    <!--                            <div class="card">-->
                    <!--                                <h:form>-->
                    <!--                                    <p:growl id="msg"/>-->
                    <!--                                    <p:selectBooleanCheckbox id="glätten" value="#{bicycleDetailView.smoothed}"-->
                    <!--                                                             itemLabel="Werte glätten">-->
                    <!--                                        &lt;!&ndash;                                        <p:ajax update="msg" listener="#{selectBooleanView.addMessage}"/>&ndash;&gt;-->
                    <!--                                        <f:ajax execute="glätten" render="chart"/>-->
                    <!--                                    </p:selectBooleanCheckbox>-->
                    <!--                                </h:form>-->
                    <!--                            </div>-->
                    <!--                        </h:column>-->
                    <h:form id="dauer">
                        <h:column>
                            <div class="field col-12 md:col-4">
                                <p:outputLabel for="range" value="Betrachtungszeitraum: "/>
                                <p:datePicker id="range" selectionMode="range" value="#{bicycleDetailView.timeRange}"
                                              showTime="true" locale="de" pattern="dd.MM.yyyy" readonlyInput="true">
                                    <f:ajax execute="dauer" render="chart"/>
                                </p:datePicker>
                            </div>
                        </h:column>
                    </h:form>

                    <h:form>
                        <h:column>
                            <div class="field col-12 md:col-4">
                                <h:outputLabel for="kennzahl" value="Kennzahl: "/>
                                <h:selectOneMenu id="kennzahl" value="#{bicycleDetailView.keyFigure}" required="true"
                                                 label="Text 4">
                                    <f:selectItems value="#{bicycleDetailView.keyFigures}"/>
                                    <f:ajax execute="kennzahl" render="chart"/>
                                </h:selectOneMenu>
                            </div>
                        </h:column>
                    </h:form>


<!--                    <h:form>-->
<!--                        <p:column>-->
<!--                            <p:outputLabel value="Intervalllänge: "/>-->
<!--                            <p:inputNumber value="#{bicycleDetailView.step}"/>-->
<!--                        </p:column>-->
<!--                        <h:column>-->
<!--                            <h:selectOneMenu id="timeUnit" value="#{bicycleDetailView.timeUnit}" required="true"-->
<!--                                             label="Text 5">-->
<!--                                <f:selectItem itemLabel="ms" itemValue="MILLIS" noSelectionOption="true"/>-->
<!--                                <f:selectItem itemLabel="sec" itemValue="SECONDS" noSelectionOption="true"/>-->
<!--                                <f:selectItem itemLabel="min" itemValue="MINUTES" noSelectionOption="true"/>-->
<!--                                <f:selectItem itemLabel="h" itemValue="HOURS"-->
<!--                                              noSelectionOption="true"/>-->
<!--                                <f:selectItem itemLabel="d" itemValue="DAYS" noSelectionOption="true"/>-->
<!--                                &lt;!&ndash;                                    <f:ajax execute="ti" render="chart"/>&ndash;&gt;-->
<!--                            </h:selectOneMenu>-->
<!--                        </h:column>-->

<!--                        <h:column>-->
<!--                            <p:commandButton value="OK" id="btn" process="@all" styleClass="mr-2">-->
<!--                                <f:ajax render="chart"/>-->
<!--                            </p:commandButton>-->
<!--                        </h:column>-->
<!--                    </h:form>-->


                    <!--                        <h:form id="spanEingabe">-->
                    <!--                            <h:column>-->
                    <!--                            <span class="ui-float-label">-->
                    <!--                                <p:inputText id="intervall" value="#{bicycleDetailView.step}">-->
                    <!--&lt;!&ndash;                                    <p:ajax execute="intervall" render="chart"/>&ndash;&gt;-->
                    <!--                                </p:inputText>-->
                    <!--                                <p:outputLabel for="intervall" value="Intervalllänge"/>-->

                    <!--                            </span>-->
                    <!--                            </h:column>-->

                    <!--                            <h:column>-->
                    <!--                                <h:outputLabel for="factor" value=""/>-->
                    <!--                                <h:selectOneMenu id="factor" value="#{bicycleDetailView.factor}" required="true"-->
                    <!--                                                 label="Text 3">-->
                    <!--                                    <f:selectItem itemLabel="ms" itemValue="1" noSelectionOption="true"/>-->
                    <!--                                    <f:selectItem itemLabel="sec" itemValue="2" noSelectionOption="true"/>-->
                    <!--                                    <f:selectItem itemLabel="min" itemValue="3" noSelectionOption="true"/>-->
                    <!--                                    <f:selectItem id="default" itemLabel="h" itemValue="4" noSelectionOption="true"/>-->
                    <!--                                    <f:selectItem itemLabel="d" itemValue="5" noSelectionOption="true"/>-->
                    <!--&lt;!&ndash;                                    <f:selectItem itemLabel="sec" itemValue="0.001" noSelectionOption="true"/>&ndash;&gt;-->
                    <!--&lt;!&ndash;                                    <f:selectItem itemLabel="min" itemValue="0.0000166667" noSelectionOption="true"/>&ndash;&gt;-->
                    <!--&lt;!&ndash;                                    <f:selectItem id="default" itemLabel="h" itemValue="0.000000277778" noSelectionOption="true"/>&ndash;&gt;-->
                    <!--&lt;!&ndash;                                    <f:selectItem itemLabel="d" itemValue="0.00000001157407" noSelectionOption="true"/>&ndash;&gt;-->
                    <!--&lt;!&ndash;                                    <f:ajax execute="factor" render="chart"/>&ndash;&gt;-->
                    <!--                                </h:selectOneMenu>-->
                    <!--                            </h:column>-->
                    <!--                            <p:commandButton value="ALL" process="@all" styleClass="mr-2">-->
                    <!--                                <f:ajax render="chart"/>-->
                    <!--                            </p:commandButton>-->
                    <!--                        </h:form>-->


                    <!--                        <h:column>-->

                    <!--                        </h:column>-->

                </h:panelGrid>

                <p:growl id="messages"/>
            </p:panel>


        </div>

        <h:form id="chartForm">
            <p:outputPanel styleClass="mb-3">
                <p:autoUpdate/>
                <p:lineChart id="chart"
                             model="#{bicycleLineChartView.getLineModel('Fahraddaten', bicycleDetailView.step, bicycleDetailView.factor, bicycleDetailView.keyFigure, bicycleDetailView.timeRange, bicycleDetailView.channel, bicycleDetailView.channel2)}"/>
            </p:outputPanel>
        </h:form>


    </ui:define>
    <ui:define name="footer">
        Geladen bicycle mit dem Channel #{bicycleDetailView.status.channel}
        Rotationsfrequenz: #{bicycleDetailView.status.channel}
    </ui:define>

    <ui:define name="rechts">
        <div class="card">
            <p:panel header="Numerische Kennzahlen">
                <h:panelGrid columns="1" cellpadding="5" style = "margin-left:auto; margin-right:auto;" styleClass="mb-3">
                    <h:form id="numForm">
                        <div class="field col-12 md:col-4">
                            <p:selectOneMenu id="num" value="#{bicycleDetailView.numSelected}}">
                                <f:selectItem itemLabel="Select One" itemValue=""/>
                                <f:selectItem itemLabel="Durchschnitt" itemValue="1"/>
                                <f:selectItem itemLabel="Summe" itemValue="2"/>
                                <f:ajax execute="numForm" render="output"/>
                            </p:selectOneMenu>
                        </div>
                    </h:form>

                </h:panelGrid>
                <h:panelGrid styleClass="mb-3" style = "margin-left:auto; margin-right:auto;">
                    <h:form id="output">
                        <h1> #{bicycleDetailView.numSelected} </h1>
                    </h:form>

                </h:panelGrid>
            </p:panel>
        </div>

        <div class="card">
            <p:panel header="Intervalllänge">
                <h:panelGrid columns="1" cellpadding="5" style = "margin-left:auto; margin-right:auto;" styleClass="mb-3">
                    <h:form>
                        <p:column>
                            <p:outputLabel value="Intervalllänge: "/>
                            <p:inputNumber value="#{bicycleDetailView.step}"  style = "size: auto" styleClass="mb-3"/>
                        </p:column>
                        <h:column>
                            <h:selectOneMenu id="timeUnit" value="#{bicycleDetailView.timeUnit}" required="true"
                                             label="Text 5">
                                <f:selectItem itemLabel="ms" itemValue="MILLIS" noSelectionOption="true"/>
                                <f:selectItem itemLabel="sec" itemValue="SECONDS" noSelectionOption="true"/>
                                <f:selectItem itemLabel="min" itemValue="MINUTES" noSelectionOption="true"/>
                                <f:selectItem itemLabel="h" itemValue="HOURS"
                                              noSelectionOption="true"/>
                                <f:selectItem itemLabel="d" itemValue="DAYS" noSelectionOption="true"/>
                                <!--                                    <f:ajax execute="ti" render="chart"/>-->
                            </h:selectOneMenu>
                        </h:column>

                        <h:column>
                            <p:commandButton value="OK" id="btn" process="@all" styleClass="mr-2">
                                <f:ajax render="chart"/>
                            </p:commandButton>
                        </h:column>
                    </h:form>
                </h:panelGrid>
            </p:panel>
        </div>
    </ui:define>
</ui:composition>